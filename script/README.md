*   **`synapse_python/poetry.lock`:** (Generated by Poetry, don't edit manually)
*   You would generate this with:

    ```bash
    cd apps/synapse_python
    poetry install
    ```
 

**Running the Application:**

1. **Navigate:** Open your terminal and go to the root directory of your project (`synapse`).
2. **Install Dependencies:**

    *   **Elixir:** Run `mix do deps.get, compile`
    *   **Python:** Navigate to `apps/synapse_python/` and run `poetry install`.
3. **Set Environment Variables:** Ensure that any necessary environment variables (e.g., `OPENAI_API_KEY`) are set.
4. **Start the Application:** Run the top-level startup script: `./start.sh`

This will:

*   Start the Elixir application (including the Phoenix server if you have that component).
*   Activate the Python virtual environment.
*   Start the Python agent process in the background, running the FastAPI server.

**Explanation and Justification:**

*   **`venv`:** We're using a standard Python virtual environment (`.venv`) to isolate dependencies. `poetry` will install dependencies into this environment.
*   **`start_agent.sh`:** This script activates the virtual environment, sets necessary environment variables for the Python agent, and starts the FastAPI server using `uvicorn`.
*   **`start.sh`:** This script orchestrates the startup of both the Elixir and Python parts of the application. It starts the Elixir app using `iex -S mix phx.server` and then launches the Python agent in the background.
*   **`agent_wrapper.py`:** This is a simple FastAPI application that:
    *   Loads and instantiates the `pydantic-ai` `Agent` based on configuration passed from Elixir.
    *   Exposes an HTTP endpoint (`/agents/{agent_id}/run_sync`) to trigger agent execution.
*   **`SynapseCore.AgentProcess`:** This Elixir GenServer manages the Python process via `Port.open`. It passes necessary configuration to the Python agent during startup. It also handles sending requests to the agent's HTTP API and processing the responses.
*   **`example_agent.py`:** This is a placeholder for your `pydantic-ai` agent code.

**Why This Approach for Development:**

*   **Turnkey:** The `start.sh` script provides a single entry point to start the entire system.
*   **Isolation:** The Python virtual environment ensures that dependencies are managed separately and don't conflict with other projects.
*   **Simple Communication:** HTTP with JSON is easy to use and debug.
*   **Flexibility:** You can easily swap out different Python agents or modify the agent wrapper without changing the core Elixir orchestration logic.
*   **Familiar Tools:** Developers familiar with Elixir/OTP and `pydantic-ai`/FastAPI will find this setup relatively straightforward.

**Future Improvements (Beyond Initial Development):**

*   **Dockerization:** For more robust deployment and environment management, consider Dockerizing the Python agent. This would further isolate the Python environment and make it easier to deploy across different systems.
*   **gRPC:** If performance becomes a bottleneck, you can switch to gRPC for communication, as discussed earlier.
*   **Advanced Agent Management:** Implement more sophisticated agent management features in `SynapseCore.AgentProcess`, such as dynamic agent creation/deletion, resource monitoring, and more advanced error handling.

This setup provides a solid foundation for a development environment that is easy to set up and use, allowing you to focus on building out the core logic of your Elixir-orchestrated AI agent system. Remember to replace the placeholder code with your actual agent definitions and workflow logic.
